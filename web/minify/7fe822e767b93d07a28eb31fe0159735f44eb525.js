/*!
 * bootstrap-star-rating v4.0.2
 * http://plugins.krajee.com/star-rating
 *
 * Author: Kartik Visweswaran
 * Copyright: 2014 - 2016, Kartik Visweswaran, Krajee.com
 *
 * Licensed under the BSD 3-Clause
 * https://github.com/kartik-v/bootstrap-star-rating/blob/master/LICENSE.md
 */
(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{if(typeof module==='object'&&module.exports){module.exports=factory(require('jquery'));}else{factory(window.jQuery);}}}(function($){"use strict";$.fn.ratingLocales={};$.fn.ratingThemes={};var NAMESPACE,DEFAULT_MIN,DEFAULT_MAX,DEFAULT_STEP,isEmpty,getCss,addCss,getDecimalPlaces,applyPrecision,handler,Rating;NAMESPACE='.rating';DEFAULT_MIN=0;DEFAULT_MAX=5;DEFAULT_STEP=0.5;isEmpty=function(value,trim){return value===null||value===undefined||value.length===0||(trim&&$.trim(value)==='');};getCss=function(condition,css){return condition?' '+css:'';};addCss=function($el,css){$el.removeClass(css).addClass(css);};getDecimalPlaces=function(num){var match=(''+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return!match?0:Math.max(0,(match[1]?match[1].length:0)-(match[2]?+match[2]:0));};applyPrecision=function(val,precision){return parseFloat(val.toFixed(precision));};handler=function($el,event,callback,skipNS){var ev=skipNS?event:event.split(' ').join(NAMESPACE+' ')+NAMESPACE;$el.off(ev).on(ev,callback);};Rating=function(element,options){var self=this;self.$element=$(element);self._init(options);};Rating.prototype={constructor:Rating,_parseAttr:function(vattr,options){var self=this,$el=self.$element,elType=$el.attr('type'),finalVal,val,chk,out;if(elType==='range'||elType==='number'){val=options[vattr]||$el.data(vattr)||$el.attr(vattr);switch(vattr){case'min':chk=DEFAULT_MIN;break;case'max':chk=DEFAULT_MAX;break;default:chk=DEFAULT_STEP;}
finalVal=isEmpty(val)?chk:val;out=parseFloat(finalVal);}else{out=parseFloat(options[vattr]);}
return isNaN(out)?chk:out;},_setDefault:function(key,val){var self=this;if(isEmpty(self[key])){self[key]=val;}},_listenClick:function(e,callback){e.stopPropagation();e.preventDefault();if(e.handled!==true){callback(e);e.handled=true;}else{return false;}},_starClick:function(e){var self=this,pos;self._listenClick(e,function(ev){if(self.inactive){return false;}
pos=self._getTouchPosition(ev);self._setStars(pos);self.$element.trigger('change').trigger('rating.change',[self.$element.val(),self._getCaption()]);self.starClicked=true;});},_starMouseMove:function(e){var self=this,pos,out;if(!self.hoverEnabled||self.inactive||(e&&e.isDefaultPrevented())){return;}
self.starClicked=false;pos=self._getTouchPosition(e);out=self.calculate(pos);self._toggleHover(out);self.$element.trigger('rating.hover',[out.val,out.caption,'stars']);},_starMouseLeave:function(e){var self=this,out;if(!self.hoverEnabled||self.inactive||self.starClicked||(e&&e.isDefaultPrevented())){return;}
out=self.cache;self._toggleHover(out);self.$element.trigger('rating.hoverleave',['stars']);},_clearClick:function(e){var self=this;self._listenClick(e,function(){if(!self.inactive){self.clear();self.clearClicked=true;}});},_clearMouseMove:function(e){var self=this,caption,val,width,out;if(!self.hoverEnabled||self.inactive||!self.hoverOnClear||(e&&e.isDefaultPrevented())){return;}
self.clearClicked=false;caption='<span class="'+self.clearCaptionClass+'">'+self.clearCaption+'</span>';val=self.clearValue;width=self.getWidthFromValue(val)||0;out={caption:caption,width:width,val:val};self._toggleHover(out);self.$element.trigger('rating.hover',[val,caption,'clear']);},_clearMouseLeave:function(e){var self=this,out;if(!self.hoverEnabled||self.inactive||self.clearClicked||!self.hoverOnClear||(e&&e.isDefaultPrevented())){return;}
out=self.cache;self._toggleHover(out);self.$element.trigger('rating.hoverleave',['clear']);},_resetForm:function(e){var self=this;if(e&&e.isDefaultPrevented()){return;}
if(!self.inactive){self.reset();}},_setTouch:function(e,flag){var self=this,ev,touches,pos,out,caption,w,width,isTouchCapable='ontouchstart'in window||(window.DocumentTouch&&document instanceof window.DocumentTouch);if(!isTouchCapable||self.inactive){return;}
ev=e.originalEvent;touches=!isEmpty(ev.touches)?ev.touches:ev.changedTouches;pos=self._getTouchPosition(touches[0]);if(flag){self._setStars(pos);self.$element.trigger('change').trigger('rating.change',[self.$element.val(),self._getCaption()]);self.starClicked=true;}else{out=self.calculate(pos);caption=out.val<=self.clearValue?self.fetchCaption(self.clearValue):out.caption;w=self.getWidthFromValue(self.clearValue);width=out.val<=self.clearValue?w+'%':out.width;self._setCaption(caption);self.$filledStars.css('width',width);}},_initTouch:function(e){var self=this,flag=(e.type==="touchend");self._setTouch(e,flag);},_initSlider:function(options){var self=this;if(isEmpty(self.$element.val())){self.$element.val(0);}
self.initialValue=self.$element.val();self._setDefault('min',self._parseAttr('min',options));self._setDefault('max',self._parseAttr('max',options));self._setDefault('step',self._parseAttr('step',options));if(isNaN(self.min)||isEmpty(self.min)){self.min=DEFAULT_MIN;}
if(isNaN(self.max)||isEmpty(self.max)){self.max=DEFAULT_MAX;}
if(isNaN(self.step)||isEmpty(self.step)||self.step===0){self.step=DEFAULT_STEP;}
self.diff=self.max-self.min;},_initHighlight:function(v){var self=this,w,cap=self._getCaption();if(!v){v=self.$element.val();}
w=self.getWidthFromValue(v)+'%';self.$filledStars.width(w);self.cache={caption:cap,width:w,val:v};},_getContainerCss:function(){var self=this;return'rating-container'+
getCss(self.theme,'theme-'+self.theme)+
getCss(self.rtl,'rating-rtl')+
getCss(self.size,'rating-'+self.size)+
getCss(self.animate,'rating-animate')+
getCss(self.disabled||self.readonly,'rating-disabled')+
getCss(self.containerClass,self.containerClass);},_checkDisabled:function(){var self=this,$el=self.$element,opts=self.options;self.disabled=opts.disabled===undefined?$el.attr('disabled')||false:opts.disabled;self.readonly=opts.readonly===undefined?$el.attr('readonly')||false:opts.readonly;self.inactive=(self.disabled||self.readonly);$el.attr({disabled:self.disabled,readonly:self.readonly});},_addContent:function(type,content){var self=this,$container=self.$container,isClear=type==='clear';if(self.rtl){return isClear?$container.append(content):$container.prepend(content);}else{return isClear?$container.prepend(content):$container.append(content);}},_generateRating:function(){var self=this,$el=self.$element,$rating,$container,w;$container=self.$container=$(document.createElement("div")).insertBefore($el);addCss($container,self._getContainerCss());self.$rating=$rating=$(document.createElement("div")).attr('class','rating').appendTo($container).append(self._getStars('empty')).append(self._getStars('filled'));self.$emptyStars=$rating.find('.empty-stars');self.$filledStars=$rating.find('.filled-stars');self._renderCaption();self._renderClear();self._initHighlight();$container.append($el);if(self.rtl){w=Math.max(self.$emptyStars.outerWidth(),self.$filledStars.outerWidth());self.$emptyStars.width(w);}},_getCaption:function(){var self=this;return self.$caption&&self.$caption.length?self.$caption.html():self.defaultCaption;},_setCaption:function(content){var self=this;if(self.$caption&&self.$caption.length){self.$caption.html(content);}},_renderCaption:function(){var self=this,val=self.$element.val(),html,$cap=self.captionElement?$(self.captionElement):'';if(!self.showCaption){return;}
html=self.fetchCaption(val);if($cap&&$cap.length){addCss($cap,'caption');$cap.html(html);self.$caption=$cap;return;}
self._addContent('caption','<div class="caption">'+html+'</div>');self.$caption=self.$container.find(".caption");},_renderClear:function(){var self=this,css,$clr=self.clearElement?$(self.clearElement):'';if(!self.showClear){return;}
css=self._getClearClass();if($clr.length){addCss($clr,css);$clr.attr({"title":self.clearButtonTitle}).html(self.clearButton);self.$clear=$clr;return;}
self._addContent('clear','<div class="'+css+'" title="'+self.clearButtonTitle+'">'+self.clearButton+'</div>');self.$clear=self.$container.find('.'+self.clearButtonBaseClass);},_getClearClass:function(){return this.clearButtonBaseClass+' '+((this.inactive)?'':this.clearButtonActiveClass);},_getTouchPosition:function(e){var pageX=isEmpty(e.pageX)?e.originalEvent.touches[0].pageX:e.pageX;return pageX-this.$rating.offset().left;},_toggleHover:function(out){var self=this,w,width,caption;if(!out){return;}
if(self.hoverChangeStars){w=self.getWidthFromValue(self.clearValue);width=out.val<=self.clearValue?w+'%':out.width;self.$filledStars.css('width',width);}
if(self.hoverChangeCaption){caption=out.val<=self.clearValue?self.fetchCaption(self.clearValue):out.caption;if(caption){self._setCaption(caption+'');}}},_init:function(options){var self=this,$el=self.$element.addClass('hide');self.options=options;$.each(options,function(key,value){self[key]=value;});if(self.rtl||$el.attr('dir')==='rtl'){self.rtl=true;$el.attr('dir','rtl');}
self.starClicked=false;self.clearClicked=false;self._initSlider(options);self._checkDisabled();if(self.displayOnly){self.inactive=true;self.showClear=false;self.showCaption=false;}
self._generateRating();self._listen();return $el.removeClass('rating-loading');},_listen:function(){var self=this,$el=self.$element,$form=$el.closest('form'),$rating=self.$rating,$clear=self.$clear;handler($rating,'touchstart touchmove touchend',$.proxy(self._initTouch,self));handler($rating,'click touchstart',$.proxy(self._starClick,self));handler($rating,'mousemove',$.proxy(self._starMouseMove,self));handler($rating,'mouseleave',$.proxy(self._starMouseLeave,self));if(self.showClear&&$clear.length){handler($clear,'click touchstart',$.proxy(self._clearClick,self));handler($clear,'mousemove',$.proxy(self._clearMouseMove,self));handler($clear,'mouseleave',$.proxy(self._clearMouseLeave,self));}
if($form.length){handler($form,'reset',$.proxy(self._resetForm,self));}
return $el;},_getStars:function(type){var self=this,stars='<span class="'+type+'-stars">',i;for(i=1;i<=self.stars;i++){stars+='<span class="star">'+self[type+'Star']+'</span>';}
return stars+'</span>';},_setStars:function(pos){var self=this,out=arguments.length?self.calculate(pos):self.calculate(),$el=self.$element;$el.val(out.val);self.$filledStars.css('width',out.width);self._setCaption(out.caption);self.cache=out;return $el;},showStars:function(val){var self=this,v=parseFloat(val);self.$element.val(isNaN(v)?self.clearValue:v);return self._setStars();},calculate:function(pos){var self=this,defaultVal=isEmpty(self.$element.val())?0:self.$element.val(),val=arguments.length?self.getValueFromPosition(pos):defaultVal,caption=self.fetchCaption(val),width=self.getWidthFromValue(val);width+='%';return{caption:caption,width:width,val:val};},getValueFromPosition:function(pos){var self=this,precision=getDecimalPlaces(self.step),val,factor,maxWidth=self.$rating.width();factor=(self.diff*pos)/(maxWidth*self.step);factor=self.rtl?Math.floor(factor):Math.ceil(factor);val=applyPrecision(parseFloat(self.min+factor*self.step),precision);val=Math.max(Math.min(val,self.max),self.min);return self.rtl?(self.max-val):val;},getWidthFromValue:function(val){var self=this,min=self.min,max=self.max,factor,$r=self.$emptyStars,w;if(!val||val<=min||min===max){return 0;}
w=$r.outerWidth();factor=w?$r.width()/w:1;if(val>=max){return 100;}
return(val-min)*factor*100/(max-min);},fetchCaption:function(rating){var self=this,val=parseFloat(rating)||self.clearValue,css,cap,capVal,cssVal,caption,vCap=self.starCaptions,vCss=self.starCaptionClasses;if(val&&val!==self.clearValue){val=applyPrecision(val,getDecimalPlaces(self.step));}
cssVal=typeof vCss==="function"?vCss(val):vCss[val];capVal=typeof vCap==="function"?vCap(val):vCap[val];cap=isEmpty(capVal)?self.defaultCaption.replace(/\{rating}/g,val):capVal;css=isEmpty(cssVal)?self.clearCaptionClass:cssVal;caption=(val===self.clearValue)?self.clearCaption:cap;return'<span class="'+css+'">'+caption+'</span>';},destroy:function(){var self=this,$el=self.$element;if(!isEmpty(self.$container)){self.$container.before($el).remove();}
$.removeData($el.get(0));return $el.off('rating').removeClass('hide');},create:function(options){var self=this,opts=options||self.options||{};return self.destroy().rating(opts);},clear:function(){var self=this,title='<span class="'+self.clearCaptionClass+'">'+self.clearCaption+'</span>';if(!self.inactive){self._setCaption(title);}
return self.showStars(self.clearValue).trigger('change').trigger('rating.clear');},reset:function(){var self=this;return self.showStars(self.initialValue).trigger('rating.reset');},update:function(val){var self=this;return arguments.length?self.showStars(val):self.$element;},refresh:function(options){var self=this,$el=self.$element;if(!options){return $el;}
return self.destroy().rating($.extend(true,self.options,options)).trigger('rating.refresh');}};$.fn.rating=function(option){var args=Array.apply(null,arguments),retvals=[];args.shift();this.each(function(){var self=$(this),data=self.data('rating'),options=typeof option==='object'&&option,theme=options.theme||self.data('theme'),lang=options.language||self.data('language')||'en',thm={},loc={},opts;if(!data){if(theme){thm=$.fn.ratingThemes[theme]||{};}
if(lang!=='en'&&!isEmpty($.fn.ratingLocales[lang])){loc=$.fn.ratingLocales[lang];}
opts=$.extend(true,{},$.fn.rating.defaults,thm,$.fn.ratingLocales.en,loc,options,self.data());data=new Rating(this,opts);self.data('rating',data);}
if(typeof option==='string'){retvals.push(data[option].apply(data,args));}});switch(retvals.length){case 0:return this;case 1:return retvals[0]===undefined?this:retvals[0];default:return retvals;}};$.fn.rating.defaults={theme:'',language:'en',stars:5,filledStar:'<i class="glyphicon glyphicon-star"></i>',emptyStar:'<i class="glyphicon glyphicon-star-empty"></i>',containerClass:'',size:'md',animate:true,displayOnly:false,rtl:false,showClear:true,showCaption:true,starCaptionClasses:{0.5:'label label-danger',1:'label label-danger',1.5:'label label-warning',2:'label label-warning',2.5:'label label-info',3:'label label-info',3.5:'label label-primary',4:'label label-primary',4.5:'label label-success',5:'label label-success'},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonBaseClass:'clear-rating',clearButtonActiveClass:'clear-rating-active',clearCaptionClass:'label label-default',clearValue:null,captionElement:null,clearElement:null,hoverEnabled:true,hoverChangeCaption:true,hoverChangeStars:true,hoverOnClear:true};$.fn.ratingLocales.en={defaultCaption:'{rating} Stars',starCaptions:{0.5:'Half Star',1:'One Star',1.5:'One & Half Star',2:'Two Stars',2.5:'Two & Half Stars',3:'Three Stars',3.5:'Three & Half Stars',4:'Four Stars',4.5:'Four & Half Stars',5:'Five Stars'},clearButtonTitle:'Clear',clearCaption:'Not Rated'};$.fn.rating.Constructor=Rating;$(document).ready(function(){var $input=$('input.rating');if($input.length){$input.removeClass('rating-loading').addClass('rating-loading').rating();}});}));;
/*!
 * @package    yii2-krajee-base
 * @subpackage yii2-widget-activeform
 * @author     Kartik Visweswaran <kartikv2@gmail.com>
 * @copyright  Copyright &copy; Kartik Visweswaran, Krajee.com, 2014 - 2016
 * @version    1.8.5
 *
 * Common client validation file for all Krajee widgets.
 *
 * For more JQuery/Bootstrap plugins and demos visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */
var kvInitPlugin,kvListenEvent,kvInitHtml5;(function($){"use strict";$.fn.kvSelector=function(){var $node=$(this),id,sel='',len=1;if(!$node.length){return'';}
id=$node.attr('id');if(id){return'#'+id;}
id=$node.attr('data-kv-id');if(id){return'[data-kv-id="'+id+'"]';}
while(len){id='kv-'+Math.round(new Date().getTime()+(Math.random()*100));sel='[data-kv-id="'+id+'"]';len=$(sel).length;}
$node.attr('data-kv-id',id);return sel;};kvInitPlugin=function(selector,callback){var $body=$(document.body);if($body.length){$body.on('load',selector,callback());}else{callback();}};kvListenEvent=function(event,selector,callback){$(selector).on(event,callback);};kvInitHtml5=function(idCap,idInp){var $caption=$(idCap),$input=$(idInp);$(document).on('change',idCap,function(){$input.val(this.value);}).on('input change',idInp,function(e){$caption.val(this.value);if(e.type==='change'){$caption.trigger('change');}});};})(window.jQuery);;yii=(function($){var pub={reloadableScripts:[],clickableSelector:'button, input[type="submit"], input[type="button"], input[type="reset"], input[type="image"]',changeableSelector:'select, input, textarea',getCsrfParam:function(){return $('meta[name=csrf-param]').attr('content');},getCsrfToken:function(){return $('meta[name=csrf-token]').attr('content');},setCsrfToken:function(name,value){$('meta[name=csrf-param]').attr('content',name);$('meta[name=csrf-token]').attr('content',value);},refreshCsrfToken:function(){var token=pub.getCsrfToken();if(token){$('form input[name="'+pub.getCsrfParam()+'"]').val(token);}},confirm:function(message,ok,cancel){if(confirm(message)){!ok||ok();}else{!cancel||cancel();}},handleAction:function($e,event){var $form=$e.attr('data-form')?$('#'+$e.attr('data-form')):$e.closest('form'),method=!$e.data('method')&&$form?$form.attr('method'):$e.data('method'),action=$e.attr('href'),params=$e.data('params'),pjax=$e.data('pjax'),pjaxPushState=!!$e.data('pjax-push-state'),pjaxReplaceState=!!$e.data('pjax-replace-state'),pjaxTimeout=$e.data('pjax-timeout'),pjaxScrollTo=$e.data('pjax-scrollto'),pjaxPushRedirect=$e.data('pjax-push-redirect'),pjaxReplaceRedirect=$e.data('pjax-replace-redirect'),pjaxSkipOuterContainers=$e.data('pjax-skip-outer-containers'),pjaxContainer,pjaxOptions={};if(pjax!==undefined&&$.support.pjax){if($e.data('pjax-container')){pjaxContainer=$e.data('pjax-container');}else{pjaxContainer=$e.closest('[data-pjax-container=""]');}
if(!pjaxContainer.length){pjaxContainer=$('body');}
pjaxOptions={container:pjaxContainer,push:pjaxPushState,replace:pjaxReplaceState,scrollTo:pjaxScrollTo,pushRedirect:pjaxPushRedirect,replaceRedirect:pjaxReplaceRedirect,pjaxSkipOuterContainers:pjaxSkipOuterContainers,timeout:pjaxTimeout,originalEvent:event,originalTarget:$e}}
if(method===undefined){if(action&&action!='#'){if(pjax!==undefined&&$.support.pjax){$.pjax.click(event,pjaxOptions);}else{window.location=action;}}else if($e.is(':submit')&&$form.length){if(pjax!==undefined&&$.support.pjax){$form.on('submit',function(e){$.pjax.submit(e,pjaxOptions);})}
$form.trigger('submit');}
return;}
var newForm=!$form.length;if(newForm){if(!action||!action.match(/(^\/|:\/\/)/)){action=window.location.href;}
$form=$('<form/>',{method:method,action:action});var target=$e.attr('target');if(target){$form.attr('target',target);}
if(!method.match(/(get|post)/i)){$form.append($('<input/>',{name:'_method',value:method,type:'hidden'}));method='POST';}
if(!method.match(/(get|head|options)/i)){var csrfParam=pub.getCsrfParam();if(csrfParam){$form.append($('<input/>',{name:csrfParam,value:pub.getCsrfToken(),type:'hidden'}));}}
$form.hide().appendTo('body');}
var activeFormData=$form.data('yiiActiveForm');if(activeFormData){activeFormData.submitObject=$e;}
if(params&&$.isPlainObject(params)){$.each(params,function(idx,obj){$form.append($('<input/>').attr({name:idx,value:obj,type:'hidden'}));});}
var oldMethod=$form.attr('method');$form.attr('method',method);var oldAction=null;if(action&&action!='#'){oldAction=$form.attr('action');$form.attr('action',action);}
if(pjax!==undefined&&$.support.pjax){$form.on('submit',function(e){$.pjax.submit(e,pjaxOptions);})}
$form.trigger('submit');$.when($form.data('yiiSubmitFinalizePromise')).then(function(){if(oldAction!=null){$form.attr('action',oldAction);}
$form.attr('method',oldMethod);if(params&&$.isPlainObject(params)){$.each(params,function(idx,obj){$('input[name="'+idx+'"]',$form).remove();});}
if(newForm){$form.remove();}});},getQueryParams:function(url){var pos=url.indexOf('?');if(pos<0){return{};}
var pairs=url.substring(pos+1).split('#')[0].split('&'),params={},pair,i;for(i=0;i<pairs.length;i++){pair=pairs[i].split('=');var name=decodeURIComponent(pair[0]);var value=decodeURIComponent(pair[1]);if(name.length){if(params[name]!==undefined){if(!$.isArray(params[name])){params[name]=[params[name]];}
params[name].push(value||'');}else{params[name]=value||'';}}}
return params;},initModule:function(module){if(module.isActive===undefined||module.isActive){if($.isFunction(module.init)){module.init();}
$.each(module,function(){if($.isPlainObject(this)){pub.initModule(this);}});}},init:function(){initCsrfHandler();initRedirectHandler();initScriptFilter();initDataMethods();}};function initRedirectHandler(){$(document).ajaxComplete(function(event,xhr,settings){var url=xhr&&xhr.getResponseHeader('X-Redirect');if(url){window.location=url;}});}
function initCsrfHandler(){$.ajaxPrefilter(function(options,originalOptions,xhr){if(!options.crossDomain&&pub.getCsrfParam()){xhr.setRequestHeader('X-CSRF-Token',pub.getCsrfToken());}});pub.refreshCsrfToken();}
function initDataMethods(){var handler=function(event){var $this=$(this),method=$this.data('method'),message=$this.data('confirm'),form=$this.data('form');if(method===undefined&&message===undefined&&form===undefined){return true;}
if(message!==undefined){$.proxy(pub.confirm,this)(message,function(){pub.handleAction($this,event);});}else{pub.handleAction($this,event);}
event.stopImmediatePropagation();return false;};$(document).on('click.yii',pub.clickableSelector,handler).on('change.yii',pub.changeableSelector,handler);}
function initScriptFilter(){var hostInfo=location.protocol+'//'+location.host;var loadedScripts=$('script[src]').map(function(){return this.src.charAt(0)==='/'?hostInfo+this.src:this.src;}).toArray();$.ajaxPrefilter('script',function(options,originalOptions,xhr){if(options.dataType=='jsonp'){return;}
var url=options.url.charAt(0)==='/'?hostInfo+options.url:options.url;if($.inArray(url,loadedScripts)===-1){loadedScripts.push(url);}else{var isReloadable=$.inArray(url,$.map(pub.reloadableScripts,function(script){return script.charAt(0)==='/'?hostInfo+script:script;}))!==-1;if(!isReloadable){xhr.abort();}}});$(document).ajaxComplete(function(event,xhr,settings){var styleSheets=[];$('link[rel=stylesheet]').each(function(){if($.inArray(this.href,pub.reloadableScripts)!==-1){return;}
if($.inArray(this.href,styleSheets)==-1){styleSheets.push(this.href)}else{$(this).remove();}})});}
return pub;})(jQuery);jQuery(document).ready(function(){yii.initModule(yii);});;yii.validation=(function($){var pub={isEmpty:function(value){return value===null||value===undefined||value==[]||value==='';},addMessage:function(messages,message,value){messages.push(message.replace(/\{value\}/g,value));},required:function(value,messages,options){var valid=false;if(options.requiredValue===undefined){var isString=typeof value=='string'||value instanceof String;if(options.strict&&value!==undefined||!options.strict&&!pub.isEmpty(isString?$.trim(value):value)){valid=true;}}else if(!options.strict&&value==options.requiredValue||options.strict&&value===options.requiredValue){valid=true;}
if(!valid){pub.addMessage(messages,options.message,value);}},'boolean':function(value,messages,options){if(options.skipOnEmpty&&pub.isEmpty(value)){return;}
var valid=!options.strict&&(value==options.trueValue||value==options.falseValue)||options.strict&&(value===options.trueValue||value===options.falseValue);if(!valid){pub.addMessage(messages,options.message,value);}},string:function(value,messages,options){if(options.skipOnEmpty&&pub.isEmpty(value)){return;}
if(typeof value!=='string'){pub.addMessage(messages,options.message,value);return;}
if(options.min!==undefined&&value.length<options.min){pub.addMessage(messages,options.tooShort,value);}
if(options.max!==undefined&&value.length>options.max){pub.addMessage(messages,options.tooLong,value);}
if(options.is!==undefined&&value.length!=options.is){pub.addMessage(messages,options.notEqual,value);}},file:function(attribute,messages,options){var files=getUploadedFiles(attribute,messages,options);$.each(files,function(i,file){validateFile(file,messages,options);});},image:function(attribute,messages,options,deferred){var files=getUploadedFiles(attribute,messages,options);$.each(files,function(i,file){validateFile(file,messages,options);if(typeof FileReader==="undefined"){return;}
var def=$.Deferred(),fr=new FileReader(),img=new Image();img.onload=function(){if(options.minWidth&&this.width<options.minWidth){messages.push(options.underWidth.replace(/\{file\}/g,file.name));}
if(options.maxWidth&&this.width>options.maxWidth){messages.push(options.overWidth.replace(/\{file\}/g,file.name));}
if(options.minHeight&&this.height<options.minHeight){messages.push(options.underHeight.replace(/\{file\}/g,file.name));}
if(options.maxHeight&&this.height>options.maxHeight){messages.push(options.overHeight.replace(/\{file\}/g,file.name));}
def.resolve();};img.onerror=function(){messages.push(options.notImage.replace(/\{file\}/g,file.name));def.resolve();};fr.onload=function(){img.src=fr.result;};fr.onerror=function(){def.resolve();};fr.readAsDataURL(file);deferred.push(def);});},number:function(value,messages,options){if(options.skipOnEmpty&&pub.isEmpty(value)){return;}
if(typeof value==='string'&&!value.match(options.pattern)){pub.addMessage(messages,options.message,value);return;}
if(options.min!==undefined&&value<options.min){pub.addMessage(messages,options.tooSmall,value);}
if(options.max!==undefined&&value>options.max){pub.addMessage(messages,options.tooBig,value);}},range:function(value,messages,options){if(options.skipOnEmpty&&pub.isEmpty(value)){return;}
if(!options.allowArray&&$.isArray(value)){pub.addMessage(messages,options.message,value);return;}
var inArray=true;$.each($.isArray(value)?value:[value],function(i,v){if($.inArray(v,options.range)==-1){inArray=false;return false;}else{return true;}});if(options.not===inArray){pub.addMessage(messages,options.message,value);}},regularExpression:function(value,messages,options){if(options.skipOnEmpty&&pub.isEmpty(value)){return;}
if(!options.not&&!value.match(options.pattern)||options.not&&value.match(options.pattern)){pub.addMessage(messages,options.message,value);}},email:function(value,messages,options){if(options.skipOnEmpty&&pub.isEmpty(value)){return;}
var valid=true;var regexp=/^((?:"?([^"]*)"?\s)?)(?:\s+)?(?:(<?)((.+)@([^>]+))(>?))$/,matches=regexp.exec(value);if(matches===null){valid=false}else{if(options.enableIDN){matches[5]=punycode.toASCII(matches[5]);matches[6]=punycode.toASCII(matches[6]);value=matches[1]+matches[3]+matches[5]+'@'+matches[6]+matches[7];}
if(matches[5].length>64){valid=false;}else if((matches[5]+'@'+matches[6]).length>254){valid=false;}else{valid=value.match(options.pattern)||(options.allowName&&value.match(options.fullPattern));}}
if(!valid){pub.addMessage(messages,options.message,value);}},url:function(value,messages,options){if(options.skipOnEmpty&&pub.isEmpty(value)){return;}
if(options.defaultScheme&&!value.match(/:\/\//)){value=options.defaultScheme+'://'+value;}
var valid=true;if(options.enableIDN){var regexp=/^([^:]+):\/\/([^\/]+)(.*)$/,matches=regexp.exec(value);if(matches===null){valid=false;}else{value=matches[1]+'://'+punycode.toASCII(matches[2])+matches[3];}}
if(!valid||!value.match(options.pattern)){pub.addMessage(messages,options.message,value);}},trim:function($form,attribute,options){var $input=$form.find(attribute.input);var value=$input.val();if(!options.skipOnEmpty||!pub.isEmpty(value)){value=$.trim(value);$input.val(value);}
return value;},captcha:function(value,messages,options){if(options.skipOnEmpty&&pub.isEmpty(value)){return;}
var hash=$('body').data(options.hashKey);if(hash==null){hash=options.hash;}else{hash=hash[options.caseSensitive?0:1];}
var v=options.caseSensitive?value:value.toLowerCase();for(var i=v.length-1,h=0;i>=0;--i){h+=v.charCodeAt(i);}
if(h!=hash){pub.addMessage(messages,options.message,value);}},compare:function(value,messages,options){if(options.skipOnEmpty&&pub.isEmpty(value)){return;}
var compareValue,valid=true;if(options.compareAttribute===undefined){compareValue=options.compareValue;}else{compareValue=$('#'+options.compareAttribute).val();}
if(options.type==='number'){value=parseFloat(value);compareValue=parseFloat(compareValue);}
switch(options.operator){case'==':valid=value==compareValue;break;case'===':valid=value===compareValue;break;case'!=':valid=value!=compareValue;break;case'!==':valid=value!==compareValue;break;case'>':valid=value>compareValue;break;case'>=':valid=value>=compareValue;break;case'<':valid=value<compareValue;break;case'<=':valid=value<=compareValue;break;default:valid=false;break;}
if(!valid){pub.addMessage(messages,options.message,value);}},ip:function(value,messages,options){var getIpVersion=function(value){return value.indexOf(':')===-1?4:6;};var negation=null,cidr=null;if(options.skipOnEmpty&&pub.isEmpty(value)){return;}
var matches=new RegExp(options.ipParsePattern).exec(value);if(matches){negation=matches[1]||null;value=matches[2];cidr=matches[4]||null;}
if(options.subnet===true&&cidr===null){pub.addMessage(messages,options.messages.noSubnet,value);return;}
if(options.subnet===false&&cidr!==null){pub.addMessage(messages,options.messages.hasSubnet,value);return;}
if(options.negation===false&&negation!==null){pub.addMessage(messages,options.messages.message,value);return;}
if(getIpVersion(value)==6){if(!options.ipv6){pub.addMessage(messages,options.messages.ipv6NotAllowed,value);}
if(!(new RegExp(options.ipv6Pattern)).test(value)){pub.addMessage(messages,options.messages.message,value);}}else{if(!options.ipv4){pub.addMessage(messages,options.messages.ipv4NotAllowed,value);}
if(!(new RegExp(options.ipv4Pattern)).test(value)){pub.addMessage(messages,options.messages.message,value);}}}};function getUploadedFiles(attribute,messages,options){if(typeof File==="undefined"){return[];}
var files=$(attribute.input,attribute.$form).get(0).files;if(!files){messages.push(options.message);return[];}
if(files.length===0){if(!options.skipOnEmpty){messages.push(options.uploadRequired);}
return[];}
if(options.maxFiles&&options.maxFiles<files.length){messages.push(options.tooMany);return[];}
return files;}
function validateFile(file,messages,options){if(options.extensions&&options.extensions.length>0){var index,ext;index=file.name.lastIndexOf('.');if(!~index){ext='';}else{ext=file.name.substr(index+1,file.name.length).toLowerCase();}
if(!~options.extensions.indexOf(ext)){messages.push(options.wrongExtension.replace(/\{file\}/g,file.name));}}
if(options.mimeTypes&&options.mimeTypes.length>0){if(!validateMimeType(options.mimeTypes,file.type)){messages.push(options.wrongMimeType.replace(/\{file\}/g,file.name));}}
if(options.maxSize&&options.maxSize<file.size){messages.push(options.tooBig.replace(/\{file\}/g,file.name));}
if(options.minSize&&options.minSize>file.size){messages.push(options.tooSmall.replace(/\{file\}/g,file.name));}}
function validateMimeType(mimeTypes,fileType){for(var i=0,len=mimeTypes.length;i<len;i++){if(new RegExp(mimeTypes[i]).test(fileType)){return true;}}
return false;}
return pub;})(jQuery);;(function($){$.fn.yiiActiveForm=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.yiiActiveForm');return false;}};var events={beforeValidate:'beforeValidate',afterValidate:'afterValidate',beforeValidateAttribute:'beforeValidateAttribute',afterValidateAttribute:'afterValidateAttribute',beforeSubmit:'beforeSubmit',ajaxBeforeSend:'ajaxBeforeSend',ajaxComplete:'ajaxComplete'};var defaults={encodeErrorSummary:true,errorSummary:'.error-summary',validateOnSubmit:true,errorCssClass:'has-error',successCssClass:'has-success',validatingCssClass:'validating',ajaxParam:'ajax',ajaxDataType:'json',validationUrl:undefined,scrollToError:true};var attributeDefaults={id:undefined,name:undefined,container:undefined,input:undefined,error:'.help-block',encodeError:true,validateOnChange:true,validateOnBlur:true,validateOnType:false,validationDelay:500,enableAjaxValidation:false,validate:undefined,status:0,cancelled:false,value:undefined};var submitDefer;var setSubmitFinalizeDefer=function($form){submitDefer=$.Deferred();$form.data('yiiSubmitFinalizePromise',submitDefer.promise());};var submitFinalize=function($form){if(submitDefer){submitDefer.resolve();submitDefer=undefined;$form.removeData('yiiSubmitFinalizePromise');}};var methods={init:function(attributes,options){return this.each(function(){var $form=$(this);if($form.data('yiiActiveForm')){return;}
var settings=$.extend({},defaults,options||{});if(settings.validationUrl===undefined){settings.validationUrl=$form.attr('action');}
$.each(attributes,function(i){attributes[i]=$.extend({value:getValue($form,this)},attributeDefaults,this);watchAttribute($form,attributes[i]);});$form.data('yiiActiveForm',{settings:settings,attributes:attributes,submitting:false,validated:false,options:getFormOptions($form)});$form.bind('reset.yiiActiveForm',methods.resetForm);if(settings.validateOnSubmit){$form.on('mouseup.yiiActiveForm keyup.yiiActiveForm',':submit',function(){$form.data('yiiActiveForm').submitObject=$(this);});$form.on('submit.yiiActiveForm',methods.submitForm);}});},add:function(attribute){var $form=$(this);attribute=$.extend({value:getValue($form,attribute)},attributeDefaults,attribute);$form.data('yiiActiveForm').attributes.push(attribute);watchAttribute($form,attribute);},remove:function(id){var $form=$(this),attributes=$form.data('yiiActiveForm').attributes,index=-1,attribute=undefined;$.each(attributes,function(i){if(attributes[i]['id']==id){index=i;attribute=attributes[i];return false;}});if(index>=0){attributes.splice(index,1);unwatchAttribute($form,attribute);}
return attribute;},validateAttribute:function(id){var attribute=methods.find.call(this,id);if(attribute!=undefined){validateAttribute($(this),attribute,true);}},find:function(id){var attributes=$(this).data('yiiActiveForm').attributes,result=undefined;$.each(attributes,function(i){if(attributes[i]['id']==id){result=attributes[i];return false;}});return result;},destroy:function(){return this.each(function(){$(this).unbind('.yiiActiveForm');$(this).removeData('yiiActiveForm');});},data:function(){return this.data('yiiActiveForm');},validate:function(){var $form=$(this),data=$form.data('yiiActiveForm'),needAjaxValidation=false,messages={},deferreds=deferredArray(),submitting=data.submitting;if(submitting){var event=$.Event(events.beforeValidate);$form.trigger(event,[messages,deferreds]);if(event.result===false){data.submitting=false;submitFinalize($form);return;}}
$.each(data.attributes,function(){this.$form=$form;if(!$(this.input).is(":disabled")){this.cancelled=false;if(data.submitting||this.status===2||this.status===3){var msg=messages[this.id];if(msg===undefined){msg=[];messages[this.id]=msg;}
var event=$.Event(events.beforeValidateAttribute);$form.trigger(event,[this,msg,deferreds]);if(event.result!==false){if(this.validate){this.validate(this,getValue($form,this),msg,deferreds,$form);}
if(this.enableAjaxValidation){needAjaxValidation=true;}}else{this.cancelled=true;}}}});$.when.apply(this,deferreds).always(function(){for(var i in messages){if(0===messages[i].length){delete messages[i];}}
if($.isEmptyObject(messages)&&needAjaxValidation){var $button=data.submitObject,extData='&'+data.settings.ajaxParam+'='+$form.attr('id');if($button&&$button.length&&$button.attr('name')){extData+='&'+$button.attr('name')+'='+$button.attr('value');}
$.ajax({url:data.settings.validationUrl,type:$form.attr('method'),data:$form.serialize()+extData,dataType:data.settings.ajaxDataType,complete:function(jqXHR,textStatus){$form.trigger(events.ajaxComplete,[jqXHR,textStatus]);},beforeSend:function(jqXHR,settings){$form.trigger(events.ajaxBeforeSend,[jqXHR,settings]);},success:function(msgs){if(msgs!==null&&typeof msgs==='object'){$.each(data.attributes,function(){if(!this.enableAjaxValidation||this.cancelled){delete msgs[this.id];}});updateInputs($form,$.extend(messages,msgs),submitting);}else{updateInputs($form,messages,submitting);}},error:function(){data.submitting=false;submitFinalize($form);}});}else if(data.submitting){setTimeout(function(){updateInputs($form,messages,submitting);},200);}else{updateInputs($form,messages,submitting);}});},submitForm:function(){var $form=$(this),data=$form.data('yiiActiveForm');if(data.validated){data.submitting=false;var event=$.Event(events.beforeSubmit);$form.trigger(event);if(event.result===false){data.validated=false;submitFinalize($form);return false;}
updateHiddenButton($form);return true;}else{setSubmitFinalizeDefer($form);if(data.settings.timer!==undefined){clearTimeout(data.settings.timer);}
data.submitting=true;methods.validate.call($form);return false;}},resetForm:function(){var $form=$(this);var data=$form.data('yiiActiveForm');setTimeout(function(){$.each(data.attributes,function(){this.value=getValue($form,this);this.status=0;var $container=$form.find(this.container);$container.removeClass(data.settings.validatingCssClass+' '+
data.settings.errorCssClass+' '+
data.settings.successCssClass);$container.find(this.error).html('');});$form.find(data.settings.errorSummary).hide().find('ul').html('');},1);},updateMessages:function(messages,summary){var $form=$(this);var data=$form.data('yiiActiveForm');$.each(data.attributes,function(){updateInput($form,this,messages);});if(summary){updateSummary($form,messages);}},updateAttribute:function(id,messages){var attribute=methods.find.call(this,id);if(attribute!=undefined){var msg={};msg[id]=messages;updateInput($(this),attribute,msg);}}};var watchAttribute=function($form,attribute){var $input=findInput($form,attribute);if(attribute.validateOnChange){$input.on('change.yiiActiveForm',function(){validateAttribute($form,attribute,false);});}
if(attribute.validateOnBlur){$input.on('blur.yiiActiveForm',function(){if(attribute.status==0||attribute.status==1){validateAttribute($form,attribute,true);}});}
if(attribute.validateOnType){$input.on('keyup.yiiActiveForm',function(e){if($.inArray(e.which,[16,17,18,37,38,39,40])!==-1){return;}
if(attribute.value!==getValue($form,attribute)){validateAttribute($form,attribute,false,attribute.validationDelay);}});}};var unwatchAttribute=function($form,attribute){findInput($form,attribute).off('.yiiActiveForm');};var validateAttribute=function($form,attribute,forceValidate,validationDelay){var data=$form.data('yiiActiveForm');if(forceValidate){attribute.status=2;}
$.each(data.attributes,function(){if(this.value!==getValue($form,this)){this.status=2;forceValidate=true;}});if(!forceValidate){return;}
if(data.settings.timer!==undefined){clearTimeout(data.settings.timer);}
data.settings.timer=setTimeout(function(){if(data.submitting||$form.is(':hidden')){return;}
$.each(data.attributes,function(){if(this.status===2){this.status=3;$form.find(this.container).addClass(data.settings.validatingCssClass);}});methods.validate.call($form);},validationDelay?validationDelay:200);};var deferredArray=function(){var array=[];array.add=function(callback){this.push(new $.Deferred(callback));};return array;};var buttonOptions=['action','target','method','enctype'];var getFormOptions=function($form){var attributes={};for(var i in buttonOptions){attributes[buttonOptions[i]]=$form.attr(buttonOptions[i]);}
return attributes;};var applyButtonOptions=function($form,$button){for(var i in buttonOptions){var value=$button.attr('form'+buttonOptions[i]);if(value){$form.attr(buttonOptions[i],value);}}};var restoreButtonOptions=function($form){var data=$form.data('yiiActiveForm');for(var i in buttonOptions){$form.attr(buttonOptions[i],data.options[buttonOptions[i]]||null);}};var updateInputs=function($form,messages,submitting){var data=$form.data('yiiActiveForm');if(submitting){var errorAttributes=[];$.each(data.attributes,function(){if(!$(this.input).is(":disabled")&&!this.cancelled&&updateInput($form,this,messages)){errorAttributes.push(this);}});$form.trigger(events.afterValidate,[messages,errorAttributes]);updateSummary($form,messages);if(errorAttributes.length){if(data.settings.scrollToError){var top=$form.find($.map(errorAttributes,function(attribute){return attribute.input;}).join(',')).first().closest(':visible').offset().top;var wtop=$(window).scrollTop();if(top<wtop||top>wtop+$(window).height()){$(window).scrollTop(top);}}
data.submitting=false;}else{data.validated=true;if(data.submitObject){data.submitObject.trigger("click");}else{$form.submit();}}}else{$.each(data.attributes,function(){if(!this.cancelled&&(this.status===2||this.status===3)){updateInput($form,this,messages);}});}
submitFinalize($form);};var updateHiddenButton=function($form){var data=$form.data('yiiActiveForm');var $button=data.submitObject||$form.find(':submit:first');if($button.length&&$button.attr('type')=='submit'&&$button.attr('name')){var $hiddenButton=$('input[type="hidden"][name="'+$button.attr('name')+'"]',$form);if(!$hiddenButton.length){$('<input>').attr({type:'hidden',name:$button.attr('name'),value:$button.attr('value')}).appendTo($form);}else{$hiddenButton.attr('value',$button.attr('value'));}}};var updateInput=function($form,attribute,messages){var data=$form.data('yiiActiveForm'),$input=findInput($form,attribute),hasError=false;if(!$.isArray(messages[attribute.id])){messages[attribute.id]=[];}
$form.trigger(events.afterValidateAttribute,[attribute,messages[attribute.id]]);attribute.status=1;if($input.length){hasError=messages[attribute.id].length>0;var $container=$form.find(attribute.container);var $error=$container.find(attribute.error);if(hasError){if(attribute.encodeError){$error.text(messages[attribute.id][0]);}else{$error.html(messages[attribute.id][0]);}
$container.removeClass(data.settings.validatingCssClass+' '+data.settings.successCssClass).addClass(data.settings.errorCssClass);}else{$error.empty();$container.removeClass(data.settings.validatingCssClass+' '+data.settings.errorCssClass+' ').addClass(data.settings.successCssClass);}
attribute.value=getValue($form,attribute);}
return hasError;};var updateSummary=function($form,messages){var data=$form.data('yiiActiveForm'),$summary=$form.find(data.settings.errorSummary),$ul=$summary.find('ul').empty();if($summary.length&&messages){$.each(data.attributes,function(){if($.isArray(messages[this.id])&&messages[this.id].length){var error=$('<li/>');if(data.settings.encodeErrorSummary){error.text(messages[this.id][0]);}else{error.html(messages[this.id][0]);}
$ul.append(error);}});$summary.toggle($ul.find('li').length>0);}};var getValue=function($form,attribute){var $input=findInput($form,attribute);var type=$input.attr('type');if(type==='checkbox'||type==='radio'){var $realInput=$input.filter(':checked');if(!$realInput.length){$realInput=$form.find('input[type=hidden][name="'+$input.attr('name')+'"]');}
return $realInput.val();}else{return $input.val();}};var findInput=function($form,attribute){var $input=$form.find(attribute.input);if($input.length&&$input[0].tagName.toLowerCase()==='div'){return $input.find('input');}else{return $input;}};})(window.jQuery);;$(document).ready(function(){$('a[data-method="post"]').on("click",function(){$.post($(this).attr('href'));});$('button[data-href*="/"]').on("click",function(){window.location=$(this).attr('data-href');})});;